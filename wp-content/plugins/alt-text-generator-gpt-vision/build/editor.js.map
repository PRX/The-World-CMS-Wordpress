{"version":3,"file":"editor.js","mappings":"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","sources":["webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///external window [\"wp\",\"hooks\"]","webpack:///external window [\"wp\",\"blockEditor\"]","webpack:///external window [\"wp\",\"components\"]","webpack:///external window [\"wp\",\"data\"]","webpack:///external window [\"wp\",\"element\"]","webpack:///external window [\"wp\",\"i18n\"]","webpack:///external window [\"wp\",\"htmlEntities\"]","webpack:///external window [\"wp\",\"coreData\"]","webpack:///external window [\"wp\",\"apiFetch\"]","webpack:///./src/constants.ts","webpack:///./src/utils/generateAltText.ts","webpack:///./src/utils/sleep.ts","webpack:///external window [\"wp\",\"primitives\"]","webpack:///external window \"ReactJSXRuntime\"","webpack:///./node_modules/.pnpm/@wordpress+icons@10.28.0_react@18.3.1/node_modules/@wordpress/icons/build-module/library/check.js","webpack:///./node_modules/.pnpm/@wordpress+icons@10.28.0_react@18.3.1/node_modules/@wordpress/icons/build-module/library/next.js","webpack:///./node_modules/.pnpm/@wordpress+icons@10.28.0_react@18.3.1/node_modules/@wordpress/icons/build-module/library/caution-filled.js","webpack:///./src/components/BulkGenerationStatus.tsx","webpack:///./src/components/BulkGenerationTable.tsx","webpack:///./src/components/CustomPromptControl.tsx","webpack:///./node_modules/.pnpm/@wordpress+icons@10.28.0_react@18.3.1/node_modules/@wordpress/icons/build-module/library/caution.js","webpack:///./src/components/GenerationDisclaimer.tsx","webpack:///./src/components/SaveAltInMediaLibraryControl.tsx","webpack:///./src/components/BulkGenerateModal.tsx","webpack:///./src/hooks/useAttachments.ts","webpack:///./src/editor/components/GalleryBlockInspectorControls.tsx","webpack:///external window [\"wp\",\"notices\"]","webpack:///./src/editor/components/GenerateAltButton.tsx","webpack:///./src/editor/components/ImageBlockInspectorControls.tsx","webpack:///./src/editor/index.tsx"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blockEditor\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"components\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"element\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"i18n\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"htmlEntities\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"coreData\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"apiFetch\"];","export const API_PATH = 'acpl/ai-alt-generator';\nexport const BULK_ACTION_OPTION_VALUE = 'generate_alt_text';\n","import apiFetch from '@wordpress/api-fetch';\nimport { API_PATH } from '../constants';\n\nexport default async (\n  attachmentId: number,\n  save: boolean = false,\n  userPrompt?: string,\n  signal?: AbortSignal,\n) => {\n  const requestData: {\n    attachment_id: number;\n    save: boolean;\n    user_prompt?: string;\n  } = {\n    attachment_id: attachmentId,\n    save,\n  };\n\n  if (userPrompt?.length) {\n    requestData.user_prompt = userPrompt;\n  }\n\n  return apiFetch<{ alt: string; img_id: number }>({\n    path: API_PATH,\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(requestData),\n    signal,\n  })\n    .then((response) => {\n      return response.alt;\n    })\n    .catch((error) => {\n      console.error(error);\n      throw error as WPError;\n    });\n};\n","export default function sleep(ms: number) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"primitives\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"ReactJSXRuntime\"];","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst check = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z\"\n  })\n});\nexport default check;\n//# sourceMappingURL=check.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst next = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M6.6 6L5.4 7l4.5 5-4.5 5 1.1 1 5.5-6-5.4-6zm6 0l-1.1 1 4.5 5-4.5 5 1.1 1 5.5-6-5.5-6z\"\n  })\n});\nexport default next;\n//# sourceMappingURL=next.js.map","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst cautionFilled = /*#__PURE__*/_jsx(SVG, {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\",\n  children: /*#__PURE__*/_jsx(Path, {\n    d: \"M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12C20 7.58172 16.4183 4 12 4ZM12.75 8V13H11.25V8H12.75ZM12.75 14.5V16H11.25V14.5H12.75Z\"\n  })\n});\nexport default cautionFilled;\n//# sourceMappingURL=caution-filled.js.map","import { Flex, Icon, Spinner } from '@wordpress/components';\nimport { _x, sprintf } from '@wordpress/i18n';\nimport { check, next, warning } from '@wordpress/icons';\nimport type { AltGenerationDetails } from '../types';\n\nexport default function BulkGenerationStatus({\n  details,\n}: BulkGenerationStatusProps) {\n  const { status, message } = details;\n\n  return (\n    <Flex justify=\"start\">\n      {status === 'generating' ? (\n        <>\n          <Spinner />\n          {_x(\n            'Generating...',\n            'Generation status',\n            'alt-text-generator-gpt-vision',\n          )}\n        </>\n      ) : status === 'generated' ? (\n        <>\n          <Icon icon={check} />\n          {_x(\n            'Generated',\n            'Generation status',\n            'alt-text-generator-gpt-vision',\n          )}\n        </>\n      ) : status === 'skipped' ? (\n        <>\n          <Icon icon={next} />\n          {_x('Skipped', 'Generation status', 'alt-text-generator-gpt-vision')}\n        </>\n      ) : status === 'error' ? (\n        <>\n          <Icon icon={warning} />\n          {sprintf(\n            _x(\n              'Error: %s',\n              'Generation status',\n              'alt-text-generator-gpt-vision',\n            ),\n            message,\n          )}\n        </>\n      ) : null}\n    </Flex>\n  );\n}\n\nexport type BulkGenerationStatusProps = {\n  details: AltGenerationDetails;\n};\n","import { Flex, Spinner } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport type { AltGenerationMap } from '../types';\nimport BulkGenerationStatus from './BulkGenerationStatus';\n\nexport default function BulkGenerationTable({\n  loading,\n  generationMap,\n}: BulkGenerationStatusTableProps) {\n  return (\n    <div\n      style={{\n        maxHeight: '18rem',\n        overflowY: 'auto',\n        marginBottom: '1rem',\n        border: '1px solid #c3c4c7',\n      }}\n    >\n      <table\n        className=\"wp-list-table fixed widefat striped\"\n        style={{ border: '0' }}\n      >\n        <thead\n          style={{\n            position: 'sticky',\n            top: '0',\n            backgroundColor: 'white',\n            zIndex: 1,\n          }}\n        >\n          <tr>\n            <th>{__('File', 'alt-text-generator-gpt-vision')}</th>\n            <th>{__('Alt text', 'alt-text-generator-gpt-vision')}</th>\n            <th>{__('Status', 'alt-text-generator-gpt-vision')}</th>\n          </tr>\n        </thead>\n        <tbody>\n          {!loading ? (\n            <tr>\n              <td colSpan={3} style={{ textAlign: 'center' }}>\n                <Spinner />\n              </td>\n            </tr>\n          ) : (\n            Array.from(generationMap, ([id, details]) => (\n              <tr key={id}>\n                <td>\n                  <a\n                    href={details.source_url}\n                    target=\"_blank\"\n                    style={{ lineBreak: 'anywhere' }}\n                  >\n                    <Flex align=\"start\" justify=\"start\">\n                      {details.thumbnail && (\n                        <img\n                          src={details.thumbnail.source_url}\n                          height={details.thumbnail.height}\n                          width={details.thumbnail.width}\n                          alt={details.alt}\n                          loading=\"lazy\"\n                          decoding=\"async\"\n                          style={{ maxWidth: '60px', height: 'auto' }}\n                        />\n                      )}\n                      {details.title}\n                    </Flex>\n                  </a>\n                </td>\n                <td>{details.alt}</td>\n                <td>\n                  <BulkGenerationStatus details={details} />\n                </td>\n              </tr>\n            ))\n          )}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport interface BulkGenerationStatusTableProps {\n  generationMap: AltGenerationMap;\n  loading: boolean;\n}\n","import { TextareaControl } from '@wordpress/components';\nimport { __, _x } from '@wordpress/i18n';\nimport type { ComponentProps } from 'react';\n\ninterface AdditionalPromptControlProps\n  extends ComponentProps<typeof TextareaControl> {}\n\nconst DEFAULT_LABEL = __(\n  'Custom prompt (optional)',\n  'alt-text-generator-gpt-vision',\n);\n\nconst DEFAULT_HELP = __(\n  'Provide custom instructions for AI to tailor the alt text generation, such as including specific keywords for SEO.',\n  'alt-text-generator-gpt-vision',\n);\n\nconst DEFAULT_PLACEHOLDER = _x(\n  'e.g. Include terms like \"AI\", \"robotics\"',\n  'Additional prompt placeholder',\n  'alt-text-generator-gpt-vision',\n);\n\nexport default function CustomPromptControl({\n  rows = 1,\n  label = DEFAULT_LABEL,\n  help = DEFAULT_HELP,\n  placeholder = DEFAULT_PLACEHOLDER,\n  ...props\n}: AdditionalPromptControlProps) {\n  return (\n    <TextareaControl\n      rows={rows}\n      label={label}\n      help={help}\n      placeholder={placeholder}\n      style={{\n        // @ts-ignore - missing types for fieldSizing\n        fieldSizing: 'content',\n        maxBlockSize: '6rlh',\n      }}\n      {...props}\n    />\n  );\n}\n","/**\n * WordPress dependencies\n */\nimport { SVG, Path } from '@wordpress/primitives';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst caution = /*#__PURE__*/_jsx(SVG, {\n  viewBox: \"0 0 24 24\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  children: /*#__PURE__*/_jsx(Path, {\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    d: \"M5.5 12a6.5 6.5 0 1 0 13 0 6.5 6.5 0 0 0-13 0ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm-.75 12v-1.5h1.5V16h-1.5Zm0-8v5h1.5V8h-1.5Z\"\n  })\n});\nexport default caution;\n//# sourceMappingURL=caution.js.map","import { Flex, Icon } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { caution } from '@wordpress/icons';\n\ninterface Props {\n  showIcon?: boolean;\n}\n\nexport default ({ showIcon = true }: Props) => {\n  return (\n    <Flex align=\"center\" justify=\"end\" gap={1}>\n      {showIcon && <Icon icon={caution} size={22} />}\n      <small>\n        {__(\n          'AI can make mistakes. Please double-check generated text.',\n          'alt-text-generator-gpt-vision',\n        )}\n      </small>\n    </Flex>\n  );\n};\n","import { ToggleControl } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\nimport { ComponentProps } from 'react';\n\ninterface SaveAltInMediaLibraryControlProps {\n  label?: string;\n  checked: ComponentProps<typeof ToggleControl>['checked'];\n  onChange: ComponentProps<typeof ToggleControl>['onChange'];\n  disabled?: ComponentProps<typeof ToggleControl>['disabled'];\n}\n\nconst DEFAULT_LABEL = __(\n  'Save alt text in media library',\n  'alt-text-generator-gpt-vision',\n);\n\nexport default function SaveAltInMediaLibraryControl({\n  label = DEFAULT_LABEL,\n  checked,\n  onChange,\n  disabled = false,\n}: SaveAltInMediaLibraryControlProps) {\n  return (\n    <ToggleControl\n      label={label}\n      checked={checked}\n      onChange={onChange}\n      help={\n        checked\n          ? __(\n              'Alternative text will be saved in the WordPress media library, making it available for reuse across site.',\n              'alt-text-generator-gpt-vision',\n            )\n          : __(\n              'Alternative text will only be saved for the current editor block.',\n              'alt-text-generator-gpt-vision',\n            )\n      }\n      disabled={disabled}\n    />\n  );\n}\n","import {\n  Button,\n  Flex,\n  FlexItem,\n  Modal,\n  ToggleControl,\n} from '@wordpress/components';\nimport { useEffect, useRef, useState } from '@wordpress/element';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { __, _n, sprintf } from '@wordpress/i18n';\nimport useAttachments from '../hooks/useAttachments';\nimport { AltGenerationMap, GenerationContext } from '../types';\nimport generateAltText from '../utils/generateAltText';\nimport sleep from '../utils/sleep';\nimport BulkGenerationTable from './BulkGenerationTable';\nimport CustomPromptControl from './CustomPromptControl';\nimport GenerationDisclaimer from './GenerationDisclaimer';\nimport SaveAltInMediaLibraryControl from './SaveAltInMediaLibraryControl';\n\nexport interface BulkGenerateModalProps {\n  attachmentIds: number[];\n  onGenerate?: ({ id, alt }: { id: number; alt: string }) => void;\n  onClose: () => void;\n  context?: GenerationContext;\n}\n\nexport default function BulkGenerateModal({\n  attachmentIds,\n  onGenerate,\n  onClose,\n  context = 'mediaLibrary',\n}: BulkGenerateModalProps) {\n  const [overwriteExisting, setOverwriteExisting] = useState(false);\n  const [customPrompt, setCustomPrompt] = useState('');\n  const [saveAltInMediaLibrary, setSaveAltInMediaLibrary] = useState(\n    context === 'mediaLibrary',\n  );\n  const [isGenerating, setIsGenerating] = useState(false);\n  const { attachments, hasResolved } = useAttachments(attachmentIds);\n  const [altGenerationMap, setAltGenerationMap] = useState<AltGenerationMap>(\n    new Map(attachmentIds.map((id) => [id, { status: '', alt: '' }])),\n  );\n  const abortController = useRef(new AbortController());\n\n  useEffect(() => {\n    if (!attachments.length) return;\n\n    setAltGenerationMap((prevMap) => {\n      const newMap = new Map(prevMap);\n\n      attachments.forEach((attachment) => {\n        const details = newMap.get(attachment.id);\n        if (!details) {\n          console.error(\n            'Generation details not found for attachment',\n            attachment,\n          );\n          return;\n        }\n\n        details.alt = attachment.alt_text;\n        details.title = decodeEntities(attachment.title.rendered);\n        details.source_url = attachment.source_url;\n\n        const thumbnail =\n          //@ts-ignore - missing WP types\n          attachment.media_details.sizes?.thumbnail ??\n            attachment.media_details.sizes?.[0] ?? {\n              width: attachment.media_details.width,\n              height: attachment.media_details.height,\n              source_url: attachment.source_url,\n            };\n\n        if (thumbnail)\n          details.thumbnail = {\n            width: thumbnail.width,\n            height: thumbnail.height,\n            source_url: thumbnail.source_url,\n          };\n\n        newMap.set(attachment.id, details);\n      });\n\n      return newMap;\n    });\n  }, [attachments, hasResolved]);\n\n  const handleStart = async () => {\n    abortController.current = new AbortController();\n    setIsGenerating(true);\n    const generateTasks = [];\n\n    for (const [id, details] of altGenerationMap) {\n      if (!overwriteExisting && details.alt.length > 0) {\n        setAltGenerationMap(\n          (prevMap) =>\n            new Map(prevMap.set(id, { ...details, status: 'skipped' })),\n        );\n        continue;\n      }\n\n      setAltGenerationMap(\n        (prevMap) =>\n          new Map(prevMap.set(id, { ...details, status: 'generating' })),\n      );\n\n      const task = generateAltText(\n        id,\n        saveAltInMediaLibrary,\n        customPrompt,\n        abortController.current.signal,\n      )\n        .then((alt) => {\n          const attachment = attachments.find(\n            (attachment) => attachment.id === id,\n          );\n          if (attachment) {\n            attachment.alt_text = alt;\n          }\n\n          setAltGenerationMap(\n            (prevMap) =>\n              new Map(\n                prevMap.set(id, { ...details, alt, status: 'generated' }),\n              ),\n          );\n\n          if (onGenerate) {\n            onGenerate({ id, alt });\n          }\n        })\n        .catch((error) => {\n          setAltGenerationMap(\n            (prevMap) =>\n              new Map(\n                prevMap.set(id, {\n                  ...details,\n                  status: 'error',\n                  message: error.message,\n                }),\n              ),\n          );\n          console.error(error);\n        });\n\n      generateTasks.push(task);\n\n      // Wait for 1 second before processing the next image to avoid too many requests at once\n      // TODO:\n      //  Use rate limiting info and implement a better solution\n      //  https://platform.openai.com/docs/guides/rate-limits/rate-limits-in-headers\n      await sleep(1000);\n    }\n\n    await Promise.all(generateTasks);\n    setIsGenerating(false);\n\n    document.dispatchEvent(new CustomEvent('altTextsGenerated'));\n  };\n\n  useEffect(() => {\n    return () => {\n      abortController.current.abort();\n    };\n  }, []);\n\n  return (\n    <Modal\n      title={__('Generate Alternative Texts', 'alt-text-generator-gpt-vision')}\n      onRequestClose={onClose}\n      shouldCloseOnClickOutside={false}\n      shouldCloseOnEsc={!isGenerating}\n      style={{ maxWidth: '48rem' }}\n    >\n      <CustomPromptControl\n        value={customPrompt}\n        onChange={setCustomPrompt}\n        disabled={isGenerating}\n      />\n\n      <ToggleControl\n        label={__(\n          'Overwrite existing alternative texts',\n          'alt-text-generator-gpt-vision',\n        )}\n        help={\n          overwriteExisting\n            ? __(\n                'The existing alternative texts will be overwritten with the new ones.',\n                'alt-text-generator-gpt-vision',\n              )\n            : __(\n                'The existing alternative texts will be preserved.',\n                'alt-text-generator-gpt-vision',\n              )\n        }\n        checked={overwriteExisting}\n        onChange={setOverwriteExisting}\n        disabled={isGenerating}\n      />\n\n      {context === 'editor' && (\n        <SaveAltInMediaLibraryControl\n          checked={saveAltInMediaLibrary}\n          onChange={setSaveAltInMediaLibrary}\n          disabled={isGenerating}\n        />\n      )}\n\n      <BulkGenerationTable\n        loading={hasResolved}\n        generationMap={altGenerationMap}\n      />\n\n      <GenerationDisclaimer />\n\n      <Flex>\n        <p>\n          {sprintf(\n            _n(\n              '%d image selected',\n              '%d images selected',\n              attachmentIds.length,\n              'alt-text-generator-gpt-vision',\n            ),\n            attachmentIds.length,\n          )}\n        </p>\n\n        <FlexItem>\n          <Flex justify=\"end\">\n            <Button onClick={onClose} isDestructive>\n              {__('Cancel', 'alt-text-generator-gpt-vision')}\n            </Button>\n\n            <Button\n              variant=\"primary\"\n              disabled={isGenerating || !hasResolved}\n              isBusy={isGenerating}\n              onClick={handleStart}\n            >\n              {__('Start', 'alt-text-generator-gpt-vision')}\n            </Button>\n          </Flex>\n        </FlexItem>\n      </Flex>\n    </Modal>\n  );\n}\n","import { type Attachment, useEntityRecords } from '@wordpress/core-data';\n\nexport default function useAttachments(ids: number[]) {\n  const { records, hasResolved, isResolving } = useEntityRecords<\n    Attachment<'view'>\n  >('postType', 'attachment', {\n    include: ids,\n    per_page: -1,\n    context: 'view',\n  });\n\n  return { attachments: records ?? [], hasResolved };\n}\n","import {\n  InspectorControls,\n  store as blockEditorStore,\n} from '@wordpress/block-editor';\nimport { Button, Panel, PanelBody } from '@wordpress/components';\nimport { dispatch, useSelect } from '@wordpress/data';\nimport { useMemo, useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport BulkGenerateModal from '../../components/BulkGenerateModal';\n\ninterface GalleryBlockInspectorControlsProps {\n  clientId: string;\n}\n\n/**\n * Add bulk alt generation panel to gallery block settings.\n */\nexport default ({ clientId }: GalleryBlockInspectorControlsProps) => {\n  const [isBulkGenerationModalOpen, setIsBulkGenerationModalOpen] =\n    useState(false);\n\n  const innerBlocks = useSelect(\n    (select) =>\n      //@ts-ignore - missing types\n      select(blockEditorStore).getBlock(clientId)\n        .innerBlocks as ImageBlockProps[],\n    [clientId],\n  );\n\n  const imageBlocks = useMemo(\n    () => innerBlocks.filter((block) => block.name === 'core/image') ?? [],\n    [innerBlocks],\n  );\n\n  const imgIds = useMemo(\n    () =>\n      innerBlocks\n        .filter((block) => block.attributes?.id)\n        .map((block) => block.attributes.id),\n    [innerBlocks],\n  );\n\n  if (imgIds.length === 0) {\n    return null;\n  }\n\n  return (\n    <InspectorControls>\n      <Panel>\n        <PanelBody\n          title={__(\n            'Alternative Text Generator',\n            'alt-text-generator-gpt-vision',\n          )}\n        >\n          <Button\n            variant=\"primary\"\n            onClick={() => setIsBulkGenerationModalOpen(true)}\n          >\n            {__('Generate alternative texts', 'alt-text-generator-gpt-vision')}\n          </Button>\n          {isBulkGenerationModalOpen && (\n            <BulkGenerateModal\n              context=\"editor\"\n              attachmentIds={imgIds}\n              onClose={() => setIsBulkGenerationModalOpen(false)}\n              onGenerate={({ id, alt }) => {\n                const imageBlock = imageBlocks.find(\n                  (block) => block.attributes.id === id,\n                );\n                if (!imageBlock) return;\n                // @ts-ignore - missing types\n                dispatch(blockEditorStore).updateBlockAttributes(\n                  imageBlock.clientId,\n                  { alt },\n                );\n              }}\n            />\n          )}\n        </PanelBody>\n      </Panel>\n    </InspectorControls>\n  );\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"notices\"];","import { Button } from '@wordpress/components';\nimport { useDispatch } from '@wordpress/data';\nimport { useState } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { store as noticesStore } from '@wordpress/notices';\nimport generateAltText from '../../utils/generateAltText';\n\ninterface GenerateAltButtonProps {\n  imgId: number;\n  currentAlt?: string;\n  onGenerate: (alt: string) => void;\n  customPrompt?: string;\n  saveAltInMediaLibrary?: boolean;\n}\n\nexport default ({\n  imgId,\n  currentAlt = '',\n  onGenerate,\n  customPrompt,\n  saveAltInMediaLibrary = false,\n}: GenerateAltButtonProps) => {\n  const [isGenerating, setIsGenerating] = useState(false);\n  const { createSuccessNotice, createErrorNotice } = useDispatch(noticesStore);\n\n  const handleClick = async () => {\n    if (\n      currentAlt.length &&\n      !confirm(\n        __(\n          'Are you sure you want to overwrite the existing alt text?',\n          'alt-text-generator-gpt-vision',\n        ),\n      )\n    ) {\n      return;\n    }\n\n    try {\n      setIsGenerating(true);\n\n      const alt = await generateAltText(\n        imgId,\n        saveAltInMediaLibrary,\n        customPrompt,\n      );\n      onGenerate(alt);\n\n      await createSuccessNotice(\n        __('Alternative text generated', 'alt-text-generator-gpt-vision'),\n        {\n          type: 'snackbar',\n          id: 'alt-text-generated',\n        },\n      );\n      //@ts-ignore\n    } catch (error: WPError) {\n      if (error.message) {\n        await createErrorNotice(\n          sprintf(\n            __(\n              'There was an error generating the alt text: %s',\n              'alt-text-generator-gpt-vision',\n            ),\n            error.message,\n          ),\n          {\n            id: 'alt-text-error',\n            type: 'default',\n          },\n        );\n      }\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  return (\n    <Button\n      variant=\"primary\"\n      onClick={handleClick}\n      isBusy={isGenerating}\n      disabled={isGenerating}\n    >\n      {__('Generate alternative text', 'alt-text-generator-gpt-vision')}\n    </Button>\n  );\n};\n","import { InspectorControls } from '@wordpress/block-editor';\nimport { Panel, PanelBody, PanelRow } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { __ } from '@wordpress/i18n';\nimport CustomPromptControl from '../../components/CustomPromptControl';\nimport GenerationDisclaimer from '../../components/GenerationDisclaimer';\nimport SaveAltInMediaLibraryControl from '../../components/SaveAltInMediaLibraryControl';\nimport GenerateAltButton from './GenerateAltButton';\n\n/**\n * Add alt generation panel to image block settings.\n */\nexport default ({\n  attributes,\n  setAttributes,\n}: {\n  attributes: ImageBlockAttrs;\n  setAttributes: ImageBlockProps['setAttributes'];\n}) => {\n  if (!attributes.id) return null;\n\n  const [customPrompt, setCustomPrompt] = useState('');\n  const [saveAltInMediaLibrary, setSaveAltInMediaLibrary] = useState(false);\n\n  return (\n    <InspectorControls>\n      <Panel>\n        <PanelBody\n          title={__(\n            'Alternative Text Generator',\n            'alt-text-generator-gpt-vision',\n          )}\n        >\n          <CustomPromptControl\n            value={customPrompt}\n            onChange={setCustomPrompt}\n          />\n\n          <SaveAltInMediaLibraryControl\n            checked={saveAltInMediaLibrary}\n            onChange={setSaveAltInMediaLibrary}\n          />\n\n          <GenerateAltButton\n            imgId={attributes.id}\n            currentAlt={attributes.alt}\n            customPrompt={customPrompt}\n            onGenerate={(alt) => setAttributes({ alt })}\n            saveAltInMediaLibrary={saveAltInMediaLibrary}\n          />\n\n          <PanelRow>\n            <GenerationDisclaimer showIcon={false} />\n          </PanelRow>\n        </PanelBody>\n      </Panel>\n    </InspectorControls>\n  );\n};\n","import { type BlockEdit } from '@wordpress/block-editor';\nimport { addFilter } from '@wordpress/hooks';\nimport type { ComponentType } from 'react';\nimport GalleryBlockInspectorControls from './components/GalleryBlockInspectorControls';\nimport ImageBlockInspectorControls from './components/ImageBlockInspectorControls';\n\nconst withGenerateAltButton =\n  (BlockEdit: ComponentType) => (props: BlockEdit.Props) => {\n    const { clientId, name, attributes, setAttributes } = props as\n      | BlockProps<'*', any>\n      | ImageBlockProps\n      | GalleryBlockProps;\n\n    if (name === 'core/image') {\n      return (\n        <>\n          <BlockEdit {...props} />\n          <ImageBlockInspectorControls\n            attributes={attributes}\n            setAttributes={setAttributes}\n          />\n        </>\n      );\n    }\n\n    if (name === 'core/gallery') {\n      return (\n        <>\n          <BlockEdit {...props} />\n          <GalleryBlockInspectorControls clientId={clientId} />\n        </>\n      );\n    }\n\n    return <BlockEdit {...props} />;\n  };\n\naddFilter(\n  'editor.BlockEdit',\n  'acpl/ai-alt-generator',\n  withGenerateAltButton,\n  20,\n);\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","window","attachmentId","save","userPrompt","signal","requestData","attachment_id","length","user_prompt","apiFetch","path","method","headers","body","JSON","stringify","then","response","alt","catch","error","console","sleep","ms","Promise","resolve","setTimeout","SVG","xmlns","viewBox","children","Path","BulkGenerationStatus","details","status","message","_jsx","Flex","justify","_jsxs","_Fragment","Spinner","_x","Icon","icon","check","next","warning","sprintf","BulkGenerationTable","loading","generationMap","style","maxHeight","overflowY","marginBottom","border","className","position","top","backgroundColor","zIndex","__","Array","from","id","href","source_url","target","lineBreak","align","thumbnail","src","height","width","decoding","maxWidth","title","colSpan","textAlign","DEFAULT_LABEL","DEFAULT_HELP","DEFAULT_PLACEHOLDER","CustomPromptControl","rows","label","help","placeholder","props","TextareaControl","fieldSizing","maxBlockSize","fillRule","clipRule","showIcon","gap","caution","size","SaveAltInMediaLibraryControl","checked","onChange","disabled","ToggleControl","BulkGenerateModal","attachmentIds","onGenerate","onClose","context","overwriteExisting","setOverwriteExisting","useState","customPrompt","setCustomPrompt","saveAltInMediaLibrary","setSaveAltInMediaLibrary","isGenerating","setIsGenerating","attachments","hasResolved","ids","records","isResolving","useEntityRecords","include","per_page","useAttachments","altGenerationMap","setAltGenerationMap","Map","map","abortController","useRef","AbortController","useEffect","prevMap","newMap","forEach","attachment","_ref","_attachment$media_det","alt_text","decodeEntities","rendered","media_details","sizes","set","current","abort","Modal","onRequestClose","shouldCloseOnClickOutside","shouldCloseOnEsc","value","GenerationDisclaimer","_n","FlexItem","Button","onClick","isDestructive","variant","isBusy","async","generateTasks","task","generateAltText","find","push","all","document","dispatchEvent","CustomEvent","clientId","isBulkGenerationModalOpen","setIsBulkGenerationModalOpen","innerBlocks","useSelect","select","blockEditorStore","getBlock","imageBlocks","useMemo","_innerBlocks$filter","filter","block","name","imgIds","attributes","InspectorControls","Panel","PanelBody","imageBlock","dispatch","updateBlockAttributes","imgId","currentAlt","createSuccessNotice","createErrorNotice","useDispatch","noticesStore","confirm","type","setAttributes","GenerateAltButton","PanelRow","addFilter","BlockEdit","ImageBlockInspectorControls","GalleryBlockInspectorControls"],"sourceRoot":""}